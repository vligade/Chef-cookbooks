# <%= @name %> check generated by Chef
check <%= @check_type %> <%= @name %>
<% if @id_type %>
  with <%= @id_type %> <%= @check_id %>
<% end %>
<% if @mode %>
  mode <%= @mode %>
<% end %>
<% if @every %>
  every <%= @every %>
<% end %>
<% if @alert %>
  alert <%= @alert %> <% if @but_not_on %>but not on<% else %>on<% end %> { <%= @alert_events.join(', ') %> }
<% end %>
<% if @group.is_a?(String) %>
  group <%= @group %>
<% elsif @group.is_a?(Array) %>
  <% @group.each do |group| %>
  group <%= group %>
  <% end %>
<% end %>
<% if @depends %>
  depends on <%= @depends %>
<% end %>
<% if @start %>
  start "<%= @start %>"
  <% if @start_as %>
    as uid <%= @start_as %> and gid <%= @start_as_group %>
  <% end %>
  <% if @start_timeout %>
    with timeout <%=@start_timeout%> seconds
  <% end %>
<% end %>
<% if @stop %>
  stop "<%= @stop %>"
  <% if @stop_as %>
    as uid <%= @stop_as %> and gid <%= @stop_as_group %>
  <% end %>
  <% if @stop_timeout %>
    with timeout <%= @stop_timeout %> seconds
  <% end %>
<% end %>
<% @tests.each do |test| %>
  if <%= test['condition'] %>
    then <%= test['action'] %>
<% end %>
